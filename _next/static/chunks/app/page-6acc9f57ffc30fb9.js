(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5175:(e,t,s)=>{Promise.resolve().then(s.bind(s,2687))},2687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(5155),a=s(2115),r=s(7097),n=s(6781),i=s(2651),o=s(6450);let c=e=>{let{restaurant:t}=e;return(0,l.jsx)("div",{className:"flex flex-col w-full sm:w-72 md:w-64 lg:w-72 m-2 rounded-xl shadow-md bg-slate-50 overflow-hidden transform hover:scale-105 transition-all duration-300",children:(0,l.jsxs)("div",{className:"p-4 sm:p-5 flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)("h3",{className:"font-semibold text-base sm:text-xl text-blue-600 truncate",children:t.name})}),(0,l.jsx)("a",{className:"text-xs sm:text-sm text-gray-600 mt-1 truncate transition-colors duration-200 ease-in-out hover:text-blue-500",href:t.link,children:t.address}),(0,l.jsx)("div",{className:"my-2 border-t border-gray-200"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(r.A,{className:"text-yellow-400 w-4 h-4 sm:w-5 sm:h-5"}),(0,l.jsxs)("p",{className:"ml-1 text-xs sm:text-sm text-gray-800",children:[t.rating," / 5"]})]}),(0,l.jsxs)("p",{className:"text-xs sm:text-sm text-gray-700",children:["$",t.price.low,t.price.high&&" - $".concat(t.price.high),!t.price.high&&"+"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("p",{className:"text-xs sm:text-sm text-gray-700 flex items-center",children:[(0,l.jsx)(n.A,{className:"text-gray-600 w-4 h-4 sm:w-5 sm:h-5 mr-1"}),t.type.join(", ")]}),(0,l.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 flex items-center",children:[(0,l.jsx)(i.A,{className:"text-gray-600 w-4 h-4 sm:w-5 sm:h-5 mr-1"}),t.location]})]}),(0,l.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 flex items-center",children:[(0,l.jsx)(o.A,{className:"text-gray-600 w-4 h-4 sm:w-5 sm:h-5 mr-1"}),t.opening_time.map((e,s)=>(0,l.jsxs)("span",{children:[e.start," - ",e.end,s<t.opening_time.length-1&&(0,l.jsx)("span",{children:"\xa0•\xa0"})]},s))]})]})})},x={basePath:"/ntu-what-to-eat"},m=(e,t)=>{let{selectedType:s,selectedPrice:l,selectedLocation:a,isOpenNow:r,sortCriteria:n}=t,i=e;if("不限"!==s&&(i=i.filter(e=>e.type.includes(s))),"不限"!==l&&(i=i.filter(e=>{let[t,s]=[0,parseInt(l)],{low:a,high:r}=e.price;return a<s&&(!r||r>=t)})),"不限"!==a&&(i=i.filter(e=>e.location===a)),r){let e=new Date,t=60*e.getHours()+e.getMinutes(),s=t+1440;i=i.filter(e=>e.opening_time.some(e=>{let[l,a]=e.start.split(":").map(Number),[r,n]=e.end.split(":").map(Number),i=60*l+a,o=60*r+n;return t>=i&&t<o||s>=i&&s<o}))}let o=[...i];return"rating"===n?o.sort((e,t)=>t.rating-e.rating):"price"===n&&o.sort((e,t)=>e.price.low-t.price.low),o};function d(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(null),[o,d]=(0,a.useState)("不限"),[u,h]=(0,a.useState)("不限"),[p,g]=(0,a.useState)("不限"),[f,j]=(0,a.useState)(!1),[b,w]=(0,a.useState)("none"),[v,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let e=await fetch("".concat(x.basePath,"/restaurants.json")),s=await e.json();t(s),r(s)})()},[]);let y=()=>{r(m(e,{selectedType:o,selectedPrice:u,selectedLocation:p,isOpenNow:f,sortCriteria:b})),i(null)};return(0,a.useEffect)(()=>{if(v&&s.length>0){let e=Math.floor(Math.random()*s.length);i(s[e]),N(!1)}},[s,v]),(0,l.jsxs)("div",{className:"container mx-auto px-4 mt-6 py-2",children:[(0,l.jsxs)("div",{className:"mt-8 mb-4 text-center",children:[(0,l.jsx)("h1",{className:"mb-4 text-4xl font-extrabold leading-none tracking-tight text-transparent bg-clip-text bg-gradient-to-tr from-blue-600 to-cyan-500 md:text-5xl lg:text-6xl",children:"NTU What To Eat"}),(0,l.jsx)("p",{className:"mb-6 text-lg font-normal text-gray-500 lg:text-xl sm:px-16 xl:px-48 dark:text-gray-400",children:"Discover your next meal at NTU"})]}),(0,l.jsxs)("div",{className:"mb-6 text-center text-sm text-gray-500",children:[(0,l.jsx)("p",{children:"Version: 1.0.2"}),(0,l.jsx)("p",{children:"Last Update: 2024-12-15"}),(0,l.jsxs)("p",{children:["Made by:"," ",(0,l.jsx)("a",{href:"https://github.com/HyperSoWeak",target:"_blank",className:"text-blue-500 hover:underline",children:"HyperSoWeak"})]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4 sm:gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"w-full sm:w-40",children:[(0,l.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"類型"}),(0,l.jsxs)("select",{id:"type",value:o,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"不限",children:"不限"}),(0,l.jsx)("option",{value:"早餐",children:"早餐"}),(0,l.jsx)("option",{value:"午餐",children:"午餐"}),(0,l.jsx)("option",{value:"晚餐",children:"晚餐"}),(0,l.jsx)("option",{value:"點心",children:"點心"}),(0,l.jsx)("option",{value:"宵夜",children:"宵夜"})]})]}),(0,l.jsxs)("div",{className:"w-full sm:w-40",children:[(0,l.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"價格低於"}),(0,l.jsxs)("select",{id:"price",value:u,onChange:e=>h(e.target.value),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"不限",children:"不限"}),(0,l.jsx)("option",{value:"100",children:"$100"}),(0,l.jsx)("option",{value:"200",children:"$200"}),(0,l.jsx)("option",{value:"400",children:"$400"}),(0,l.jsx)("option",{value:"600",children:"$600"})]})]}),(0,l.jsxs)("div",{className:"w-full sm:w-40",children:[(0,l.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"位置"}),(0,l.jsxs)("select",{id:"location",value:p,onChange:e=>g(e.target.value),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"不限",children:"不限"}),(0,l.jsx)("option",{value:"校內",children:"校內"}),(0,l.jsx)("option",{value:"118巷",children:"118巷"}),(0,l.jsx)("option",{value:"公館",children:"公館"}),(0,l.jsx)("option",{value:"溫州街",children:"溫州街"})]})]}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("label",{className:"inline-flex items-center mt-3",children:[(0,l.jsx)("input",{type:"checkbox",checked:f,onChange:e=>j(e.target.checked),className:"form-checkbox h-4 w-4 text-blue-600"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"營業中"})]})}),(0,l.jsxs)("div",{className:"w-full sm:w-40",children:[(0,l.jsx)("label",{htmlFor:"sort",className:"block text-sm font-medium text-gray-700",children:"排序"}),(0,l.jsxs)("select",{id:"sort",value:b,onChange:e=>w(e.target.value),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"none",children:"無"}),(0,l.jsx)("option",{value:"rating",children:"評價"}),(0,l.jsx)("option",{value:"price",children:"價格"})]})]}),(0,l.jsx)("div",{className:"flex items-end w-full sm:w-auto",children:(0,l.jsx)("button",{onClick:y,className:"w-full sm:w-auto py-3 px-6 text-white bg-blue-600 rounded-lg text-lg font-medium shadow-lg hover:bg-blue-700 transition duration-200 ease-in-out",children:"查詢"})}),(0,l.jsx)("div",{className:"flex items-end w-full sm:w-auto",children:(0,l.jsx)("button",{onClick:()=>{N(!0),y()},className:"w-full sm:w-auto py-3 px-6 text-white bg-green-600 rounded-lg text-lg font-medium shadow-lg hover:bg-green-700 transition duration-200 ease-in-out mt-4",children:"幫我選"})})]}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:n?(0,l.jsx)(c,{restaurant:n},n.name):s.map(e=>(0,l.jsx)(c,{restaurant:e},e.name))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[998,441,517,358],()=>t(5175)),_N_E=e.O()}]);